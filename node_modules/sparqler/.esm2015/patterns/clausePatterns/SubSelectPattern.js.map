{"version":3,"sources":["patterns/clausePatterns/SubSelectPattern.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,MAAM,sBAAsB,CAAC;AAEjD,OAAO,EAAE,cAAc,EAAE,MAAM,6BAA6B,CAAC;AAC7D,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAE3D,OAAO,EAAE,YAAY,EAAE,MAAM,gBAAgB,CAAC;AA2F9C,SAAS,WAAW,CAAE,SAA8B,EAAE,QAAgC;IACrF,OAAO,CAAE,GAAG,SAAkB,EAAG,EAAE;QAClC,MAAM,WAAW,GAAkB,IAAI,cAAc,CAAE,QAAQ,CAAE,CAAC;QAClE,IAAI,SAAS,CAAC,MAAM;YAAG,WAAW,CAAC,WAAW,CAAE,GAAG,SAAS,CAAC,GAAG,CAAE,CAAC,CAAC,EAAE,CAAC,IAAI,aAAa,CAAE,CAAC,CAAE,CAAE,CAAE,CAAC;QAElG,MAAM,YAAY,GAA6B,IAAI,SAAS,CAAE;YAC7D,WAAW,EAAE,SAAS,CAAC,WAAW;YAClC,WAAW;SACX,CAAE,CAAC;QACJ,OAAO,YAAY,CAAC,UAAU,CAAE,YAAY,EAAE,EAAE,CAAE,CAAC;IACpD,CAAC,CAAC;AACH,CAAC;AAMD,MAAM,CAAC,MAAM,gBAAgB,GAczB;IACH,UAAU,CAAoB,SAA8B,EAAE,MAAQ;QACrE,OAAO,MAAM,CAAC,MAAM,CAAE,MAAM,EAAE;YAC7B,MAAM,EAAE,WAAW,CAAE,SAAS,CAAE;YAChC,cAAc,EAAE,WAAW,CAAE,SAAS,EAAE,UAAU,CAAE;YACpD,aAAa,EAAE,WAAW,CAAE,SAAS,EAAE,SAAS,CAAE;YAClD,SAAS,EAAE,GAAG,EAAE,CAAC,WAAW,CAAE,SAAS,CAAE,EAAE;YAC3C,iBAAiB,EAAE,GAAG,EAAE,CAAC,WAAW,CAAE,SAAS,EAAE,UAAU,CAAE,EAAE;YAC/D,gBAAgB,EAAE,GAAG,EAAE,CAAC,WAAW,CAAE,SAAS,EAAE,SAAS,CAAE,EAAE;SAC7D,CAAE,CAAC;IACL,CAAC;CACD,CAAC","file":"SubSelectPattern.js","sourcesContent":["import { Container } from \"../../data/Container\";\n\nimport { SubSelectToken } from \"../../tokens/SubSelectToken\";\nimport { VariableToken } from \"../../tokens/VariableToken\";\n\nimport { WherePattern } from \"./WherePattern\";\n\n\n/**\n * Interface with the methods available to make a sub-SELECT query.\n */\nexport interface SubSelectPattern {\n\t/**\n\t * Set a list of variables to be retrieved by the sub-query.\n\t *\n\t * @param variables The list of variables.\n\t * IF no variable is provided, the behaviour will be the same\n\t * as {@link SubSelectPattern.selectAll}\n\t *\n\t * @returns Object with the methods to keep constructing the\n\t * sub-query.\n\t */\n\tselect( ...variables:string[] ):WherePattern;\n\n\t/**\n\t * Set a list of variables to be retrieved by the sub-query\n\t * ensuring no repetitions in the set of solutions.\n\t *\n\t * @param variables The list of variables.\n\t * IF no variable is provided, the behaviour will be the same\n\t * as {@link SubSelectPattern.selectAllDistinct}\n\t *\n\t * @returns Object with the methods to keep constructing the\n\t * sub-query.\n\t */\n\tselectDistinct( ...variables:string[] ):WherePattern;\n\n\t/**\n\t * Set a list of variables to be retrieved by the sub-query\n\t * permitting eliminations of non-distinct solutions, but not\n\t * ensuring a set of unique ones.\n\t *\n\t * @param variables The list of variables.\n\t * IF no variable is provided, the behaviour will be the same\n\t * as {@link SubSelectPattern.selectAllReduced}\n\t *\n\t * @returns Object with the methods to keep constructing the\n\t * sub-query.\n\t */\n\tselectReduced( ...variables:string[] ):WherePattern;\n\n\t/**\n\t * Set that the sub-query must return all the solutions for the\n\t * variables used in the where pattern matching.\n\t *\n\t * @returns Object with the methods to keep constructing the\n\t * sub-query.\n\t */\n\tselectAll():WherePattern;\n\n\t/**\n\t * Set that the sub-query must return all the solutions for the\n\t * variables used in the where pattern matching, ensuring there\n\t * is not duplicated solutions.\n\t *\n\t * @returns Object with the methods to keep constructing the\n\t * sub-query.\n\t */\n\tselectAllDistinct():WherePattern;\n\n\t/**\n\t * Set that the sub-query must return all the solutions for the\n\t * variables used in the where pattern matching, permitting\n\t * eliminations of non-distinct solutions, but not ensuring a set\n\t * of unique ones.\n\t *\n\t * @returns Object with the methods to keep constructing the\n\t * sub-query.\n\t */\n\tselectAllReduced():WherePattern;\n}\n\n\n/**\n * Function that creates a generic {@link SubSelectPattern.select} function.\n * This function is used to create all the methods for the {@link SubSelectPattern}\n *\n * @param container The container with the query data for the statement.\n * @param modifier The optional modifier of the SELECT queries.\n *\n * @returns A generic \"select\" function that shares the\n * {@link SubSelectPattern.select} signature. It behaviour depends of\n * the {@param modifier} set.\n *\n * @private\n */\nfunction getSelectFn( container:Container<undefined>, modifier?:\"DISTINCT\" | \"REDUCED\" ):SubSelectPattern[ \"select\" ] {\n\treturn ( ...variables:string[] ) => {\n\t\tconst targetToken:SubSelectToken = new SubSelectToken( modifier );\n\t\tif( variables.length ) targetToken.addVariable( ...variables.map( x => new VariableToken( x ) ) );\n\n\t\tconst newContainer:Container<SubSelectToken> = new Container( {\n\t\t\tiriResolver: container.iriResolver,\n\t\t\ttargetToken\n\t\t} );\n\t\treturn WherePattern.createFrom( newContainer, {} );\n\t};\n}\n\n\n/**\n * Constant with the utils for {@link SubSelectPattern} objects.\n */\nexport const SubSelectPattern:{\n\t/**\n\t * Factory function that allows to crete a {@link SubSelectPattern}\n\t * from the {@param object} provided.\n\t *\n\t * @param container The related container with the data for the\n\t * {@link SubSelectPattern} statement.\n\t * @param object The base base from where to create the\n\t * {@link SubSelectPattern} statement.\n\t *\n\t * @return The {@link SubSelectPattern} statement created from the\n\t * {@param object} provided.\n\t */\n\tcreateFrom<O extends object>( container:Container<undefined>, object:O ):O & SubSelectPattern;\n} = {\n\tcreateFrom<O extends object>( container:Container<undefined>, object:O ):O & SubSelectPattern {\n\t\treturn Object.assign( object, {\n\t\t\tselect: getSelectFn( container ),\n\t\t\tselectDistinct: getSelectFn( container, \"DISTINCT\" ),\n\t\t\tselectReduced: getSelectFn( container, \"REDUCED\" ),\n\t\t\tselectAll: () => getSelectFn( container )(),\n\t\t\tselectAllDistinct: () => getSelectFn( container, \"DISTINCT\" )(),\n\t\t\tselectAllReduced: () => getSelectFn( container, \"REDUCED\" )(),\n\t\t} );\n\t},\n};\n"],"sourceRoot":"../../../src"}