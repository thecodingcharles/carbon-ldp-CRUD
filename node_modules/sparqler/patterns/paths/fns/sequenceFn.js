"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var PathSequenceToken_1 = require("../../../tokens/PathSequenceToken");
var FluentPathContainer_1 = require("../FluentPathContainer");
var utils_1 = require("../utils");
var utils_2 = require("./utils");
var _getInSequenceToken = utils_2._getTokenWrapper("pathAlternative", "pathSequence");
function getSequenceFn(container) {
    return function () {
        var paths = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            paths[_i] = arguments[_i];
        }
        var _a;
        var tokensParams = paths
            .reduce(function (array, paths) { return array.concat(paths); }, [])
            .map(function (path) { return utils_1.getPropertyToken(container, path); });
        if (container.targetToken && !(container.targetToken instanceof PathSequenceToken_1.PathSequenceToken))
            tokensParams.unshift(container.targetToken);
        var processedTokens = tokensParams
            .map(_getInSequenceToken);
        if (container.targetToken instanceof PathSequenceToken_1.PathSequenceToken)
            processedTokens.unshift.apply(processedTokens, container.targetToken.paths);
        var targetToken = new PathSequenceToken_1.PathSequenceToken();
        (_a = targetToken.paths).push.apply(_a, processedTokens);
        var newContainer = new FluentPathContainer_1.FluentPathContainer(tslib_1.__assign({}, container, { targetToken: targetToken }));
        return container.fluentPathFactory(newContainer, {});
    };
}
exports.getSequenceFn = getSequenceFn;

//# sourceMappingURL=sequenceFn.js.map
