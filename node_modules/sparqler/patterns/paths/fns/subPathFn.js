"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var SharedSubPathToken_1 = require("../../../tokens/SharedSubPathToken");
var FluentPathContainer_1 = require("../FluentPathContainer");
var utils_1 = require("../utils");
var utils_2 = require("./utils");
function _canBeNegated(token) {
    return !token
        || utils_2._isPathInNegatedToken(token)
        || (token.token === "pathAlternative" && token.paths.every(utils_2._isPathInNegatedToken));
}
function getSubPathFn(container) {
    return function (path) {
        var token = container.targetToken
            ? container.targetToken
            : path === void 0 ? path
                : utils_1.getPropertyToken(container, path);
        var targetToken = new SharedSubPathToken_1.SharedSubPathToken(token);
        var newContainer = new FluentPathContainer_1.FluentPathContainer(tslib_1.__assign({}, container, { targetToken: targetToken }));
        if (_canBeNegated(token))
            return container.deniableFluentPathFactory(newContainer, {});
        return container.fluentPathFactory(newContainer, {});
    };
}
exports.getSubPathFn = getSubPathFn;

//# sourceMappingURL=subPathFn.js.map
