{"version":3,"sources":["Registry/Registry.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,mBAAmB,EAAE,MAAM,+BAA+B,CAAC;AACpE,OAAO,EAAE,oBAAoB,EAAE,MAAM,gCAAgC,CAAC;AAEtE,OAAO,EAAE,gBAAgB,EAAE,MAAM,2BAA2B,CAAC;AAI7D,OAAO,EAAE,OAAO,EAAE,MAAM,oBAAoB,CAAC;AA0N7C,SAAS,kBAAkB,CAAa,QAAoB;IAC3D,OAAO,KAAK,IAAI,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC;AAC/E,CAAC;AAED,SAAS,mBAAmB,CAAa,QAAoB;IAC5D,OAAO,KAAK,IAAI,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC;AACnE,CAAC;AAED,SAAS,cAAc,CAAa,QAAoB;IACvD,OAAO,KAAK,IAAI,QAAQ,CAAC,CAAC;QACzB,QAAQ,CAAC,iBAAiB,CAAC,CAAC,CAAC,QAAQ,CAAC,gBAAgB,CAAC;AACzD,CAAC;AAED,SAAS,YAAY,CAAa,QAAoB,EAAE,EAAS;IAChE,OAAO,KAAK,IAAI,QAAQ,CAAC,CAAC;QACzB,QAAQ,CAAC,YAAY,CAAE,EAAE,CAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAE,EAAE,CAAE,CAAC;AAC3D,CAAC;AAED,SAAS,YAAY,CAAa,QAAoB,EAAE,OAAe;IACtE,OAAO,KAAK,IAAI,QAAQ,CAAC,CAAC;QACzB,QAAQ,CAAC,YAAY,CAAE,OAAO,CAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAE,OAAO,CAAE,CAAC;AACrE,CAAC;AAGD,SAAS,SAAS,CAAgC,WAA4B,EAAE,KAAW;IAC1F,IAAI,CAAE,IAAI;QAAG,OAAO,KAAK,CAAC;IAE1B,IAAI;QACH,MAAM,EAAE,GAAU,OAAO,CAAC,KAAK,CAAE,WAAW,CAAE,CAAC;QAC/C,YAAY,CAAE,IAAI,EAAE,EAAE,CAAE,CAAC;QAEzB,OAAO,IAAI,CAAC;KACZ;IAAC,WAAM;QACP,IAAI,KAAK,KAAK,IAAI;YAAG,OAAO,KAAK,CAAC;QAElC,MAAM,cAAc,GAA2B,mBAAmB,CAAE,IAAI,CAAE,CAAC;QAC3E,OAAO,SAAS,CAAC,IAAI,CAAE,cAAc,EAAE,WAAW,CAAE,CAAC;KACrD;AACF,CAAC;AAED,SAAS,YAAY,CAAgC,EAAS,EAAE,KAAW;IAC1E,IAAI,CAAE,IAAI;QAAG,OAAO,KAAK,CAAC;IAE1B,IAAI,SAAS,CAAC,IAAI,CAAE,IAAI,EAAE,EAAE,EAAE,IAAI,CAAE,EAAG;QACtC,MAAM,OAAO,GAAU,YAAY,CAAE,IAAI,EAAE,EAAE,CAAE,CAAC;QAEhD,MAAM,YAAY,GAAkC,kBAAkB,CAAE,IAAI,CAAE,CAAC;QAC/E,IAAI,YAAY,CAAC,GAAG,CAAE,OAAO,CAAE;YAAG,OAAO,IAAI,CAAC;KAC9C;IAED,IAAI,KAAK,KAAK,IAAI;QAAG,OAAO,KAAK,CAAC;IAElC,MAAM,cAAc,GAA2B,mBAAmB,CAAE,IAAI,CAAE,CAAC;IAC3E,OAAO,YAAY,CAAC,IAAI,CAAE,cAAc,EAAE,EAAE,CAAE,CAAC;AAChD,CAAC;AAED,SAAS,YAAY,CAAoB,EAAS,EAAE,KAAW;IAC9D,MAAM,cAAc,GAA2B,mBAAmB,CAAE,IAAI,CAAE,CAAC;IAE3E,IAAI,CAAE,SAAS,CAAC,IAAI,CAAE,IAAI,EAAE,EAAE,EAAE,IAAI,CAAE,EAAG;QACxC,IAAI,KAAK,KAAK,IAAI,IAAI,CAAE,cAAc;YAAG,MAAM,IAAI,oBAAoB,CAAE,IAAI,EAAE,oBAAoB,CAAE,CAAC;QACtG,OAAO,YAAY,CAAC,IAAI,CAAE,cAAc,EAAE,EAAE,CAAE,CAAC;KAC/C;IAED,MAAM,OAAO,GAAU,YAAY,CAAE,IAAI,EAAE,EAAE,CAAE,CAAC;IAEhD,MAAM,YAAY,GAAkC,kBAAkB,CAAE,IAAI,CAAE,CAAC;IAC/E,IAAI,YAAY,CAAC,GAAG,CAAE,OAAO,CAAE;QAAG,OAAO,YAAY,CAAC,GAAG,CAAE,OAAO,CAAG,CAAC;IAEtE,IAAI,KAAK,KAAK,IAAI,IAAI,YAAY,CAAC,IAAI,CAAE,cAAc,EAAE,EAAE,CAAE;QAC5D,OAAO,YAAY,CAAC,IAAI,CAAE,cAAe,EAAE,EAAE,CAAE,CAAC;IAEjD,OAAO,YAAY,CAAE,IAAI,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,CAAE,CAAC;AAC1C,CAAC;AAED,SAAS,aAAa,CAAoB,KAAW;IACpD,MAAM,YAAY,GAAkC,kBAAkB,CAAE,IAAI,CAAE,CAAC;IAE/E,MAAM,QAAQ,GAAuB,KAAK,CAAC,IAAI,CAAE,YAAY,CAAC,MAAM,EAAE,CAAE,CAAC;IAEzE,MAAM,cAAc,GAA2B,mBAAmB,CAAE,IAAI,CAAE,CAAC;IAC3E,IAAI,KAAK,KAAK,IAAI,IAAI,CAAE,cAAc;QAAG,OAAO,QAAQ,CAAC;IAEzD,OAAO;QACN,GAAG,aAAa,CAAC,IAAI,CAAE,cAAc,CAAE;QACvC,GAAG,QAAQ;KACX,CAAC;AACH,CAAC;AAED,SAAS,eAAe,CAAgC,WAAsC,EAAE,KAAW;IAC1G,IAAI,CAAE,IAAI;QAAG,OAAO,KAAK,CAAC;IAE1B,MAAM,EAAE,GAAU,OAAO,CAAC,KAAK,CAAE,WAAW,CAAE,CAAC;IAC/C,IAAI,SAAS,CAAC,IAAI,CAAE,IAAI,EAAE,EAAE,EAAE,IAAI,CAAE,EAAG;QACtC,MAAM,OAAO,GAAU,YAAY,CAAE,IAAI,EAAE,EAAE,CAAE,CAAC;QAEhD,MAAM,YAAY,GAAkC,kBAAkB,CAAE,IAAI,CAAE,CAAC;QAC/E,IAAI,YAAY,CAAC,MAAM,CAAE,OAAO,CAAE;YAAG,OAAO,IAAI,CAAC;KACjD;IAED,IAAI,KAAK,KAAK,IAAI;QAAG,OAAO,KAAK,CAAC;IAElC,MAAM,cAAc,GAA2B,mBAAmB,CAAE,IAAI,CAAE,CAAC;IAC3E,OAAO,eAAe,CAAC,IAAI,CAAE,cAAc,EAAE,WAAW,CAAE,CAAC;AAC5D,CAAC;AAcD,MAAM,CAAC,MAAM,QAAQ,GAAmB;IACvC,SAAS,EAAE;QACV,QAAQ,EAAE,KAAK,CAAC;QAEhB,IAAI,gBAAgB;YACnB,MAAM,IAAI,oBAAoB,CAAE,yCAAyC,CAAE,CAAC;QAC7E,CAAC;QAED,IAAI,cAAc,KAAoC,OAAO,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC;QAGzE,OAAO,EAAE,SAAS;QAGlB,UAAU,EAAE,YAAY;QAExB,UAAU,EAAE,YAAY;QAExB,WAAW,EAAE,aAAa;QAE1B,aAAa,EAAE,eAAe;QAG9B,WAAW,CAAsC,OAAmB;YACnE,IAAI,CAAE,OAAO,CAAC,GAAG;gBAAG,MAAM,IAAI,oBAAoB,CAAE,kCAAkC,CAAE,CAAC;YAEzF,MAAM,OAAO,GAAU,YAAY,CAAE,IAAI,EAAE,OAAO,CAAC,GAAG,CAAE,CAAC;YAEzD,MAAM,YAAY,GAAkC,kBAAkB,CAAE,IAAI,CAAE,CAAC;YAC/E,IAAI,YAAY,CAAC,GAAG,CAAE,OAAO,CAAE;gBAAG,MAAM,IAAI,mBAAmB,CAAE,IAAI,OAAO,CAAC,GAAG,0BAA0B,CAAE,CAAC;YAE7G,MAAM,QAAQ,GAAyB,cAAc,CAAE,IAAI,CAAE;iBAC3D,QAAQ,CAAE,MAAM,CAAC,MAAM,CAA4B,OAAO,EAAE;gBAC5D,SAAS,EAAE,IAAI;aACf,CAAE,CAAE,CAAC;YAEP,YAAY,CAAC,GAAG,CAAE,OAAO,EAAE,QAAQ,CAAE,CAAC;YAEtC,OAAO,QAAQ,CAAC;QACjB,CAAC;QAED,WAAW,CAAoB,EAAS;YACvC,OAAO,EAAE,CAAC;QACX,CAAC;KACD;IAGD,WAAW,CAAoB,MAAa;QAC3C,OAAO,gBAAgB;aACrB,iBAAiB,CAAE,QAAQ,CAAC,SAAS,EAAE,MAAM,CAAE,CAAC;IACnD,CAAC;IAED,QAAQ,CAAoB,MAAQ;QACnC,IAAI,QAAQ,CAAC,WAAW,CAAE,MAAM,CAAE;YAAG,OAAO,MAAM,CAAC;QAEnD,OAAO,gBAAgB;aACrB,oBAAoB,CAAE,QAAQ,CAAC,SAAS,EAAE,MAAM,CAAE,CAAC;IACtD,CAAC;CACD,CAAC","file":"Registry.js","sourcesContent":["import { IDAlreadyInUseError } from \"../Errors/IDAlreadyInUseError\";\nimport { IllegalArgumentError } from \"../Errors/IllegalArgumentError\";\n\nimport { BiModelDecorator } from \"../Model/BiModelDecorator\";\nimport { ModelDecorator } from \"../Model/ModelDecorator\";\nimport { ModelPrototype } from \"../Model/ModelPrototype\";\n\nimport { Pointer } from \"../Pointer/Pointer\";\nimport { $PointerLibrary, PointerLibrary } from \"../Pointer/PointerLibrary\";\nimport { $PointerValidator, PointerValidator } from \"../Pointer/PointerValidator\";\n\nimport { BaseRegisteredPointer } from \"./BaseRegisteredPointer\";\nimport { $BaseRegistry, BaseRegistry } from \"./BaseRegistry\";\nimport { RegisteredPointer } from \"./RegisteredPointer\";\n\n\n/**\n * Interface with the base methods of a service that stores and manages an specific type of resources.\n */\nexport interface Registry<MODEL extends RegisteredPointer = RegisteredPointer> extends PointerLibrary, PointerValidator {\n\t/**\n\t * Parent registry of the registry.\n\t */\n\treadonly registry:Registry<any> | $Registry<any> | undefined;\n\n\t/**\n\t * Decorator object to personalize the pointers of the registry.\n\t */\n\treadonly __modelDecorator:ModelDecorator<MODEL, BaseRegisteredPointer>;\n\t/**\n\t * Map where the resources of the registry are stored.\n\t */\n\treadonly __resourcesMap:Map<string, MODEL>;\n\n\n\t/**\n\t * Returns if the provided ID string or pointer can be stored in any of the registry hierarchy.\n\t * @param idOrPointer The id or pointer to be checked.\n\t */\n\tinScope( idOrPointer:string | Pointer ):boolean;\n\t/**\n\t * Returns if the provided ID string or pointer can be only stored in the current registry.\n\t * @param idOrPointer The id or pointer to be checked.\n\t * @param local Flag to ignore hierarchy and only check in the current registry.\n\t */\n\tinScope( idOrPointer:string | Pointer, local:true ):boolean;\n\n\n\t/**\n\t * Returns true if a resource identified by the provided ID exists in the registry hierarchy.\n\t * @param id ID to check its existence.\n\t */\n\thasPointer( id:string ):boolean;\n\t/**\n\t * Returns true if a resource identified by the provided ID exists in the registry hierarchy.\n\t * @param id ID to check its existence.\n\t * @param local Flag to ignore hierarchy and only check in the current registry.\n\t */\n\thasPointer( id:string, local:true ):boolean;\n\n\t/**\n\t * Returns the resource identified by the provided ID from the first existence in the registry hierarchy.\n\t * If non exists, a pointer is created in the first register where the ID in scope of.\n\t *\n\t * A error is thrown when no pointer could be returned or created in any registry.\n\t *\n\t * @param id ID to return its pointer representation.\n\t */\n\tgetPointer( id:string ):RegisteredPointer;\n\t/**\n\t * Returns the resource identified by the provided ID from the current registry.\n\t * If non exists, a resource is created from the current registry model.\n\t *\n\t * A error is thrown when no pointer could be returned or created.\n\t *\n\t * @param id ID to check its existence.\n\t * @param local Flag to ignore hierarchy and only return pointers from the current registry.\n\t */\n\tgetPointer( id:string, local:true ):MODEL;\n\n\t/**\n\t * Returns all the pointers stored the registry hierarchy.\n\t */\n\tgetPointers():RegisteredPointer[];\n\t/**\n\t * Returns all the pointers stored in the current registry.\n\t * @param local Flag to ignore hierarchy and only return pointers from the current registry.\n\t */\n\tgetPointers( local:true ):MODEL[];\n\n\t/**\n\t * Removes the resource identified by the provided string ID or {@link Pointer.$id}, from the first occurrence in the registry hierarchy.\n\t * Returns true if the resource could be removed, false otherwise.\n\t * @param idOrPointer ID or Pointer to be removed.\n\t */\n\tremovePointer( idOrPointer:string | RegisteredPointer ):boolean;\n\t/**\n\t * Removes the resource identified by the provided string ID or {@link Pointer.$id}, from the first occurrence in the registry hierarchy.\n\t * Returns true if the resource could be removed, false otherwise.\n\t * @param idOrPointer ID or Pointer to be removed.\n\t * @param local Flag to ignore hierarchy and only remove from the current registry.\n\t */\n\tremovePointer( idOrPointer:string | RegisteredPointer, local:true ):boolean;\n\n\n\t/**\n\t * Adds the provided object as a resource of the registry.\n\t * @param pointer The base object to be added as a resource of the registry.\n\t */\n\t_addPointer<T extends object>( pointer:T & Pointer ):T & MODEL;\n\n\t/**\n\t * Returns the local identifier for the ID provided.\n\t * Throws and error if the ID cannot be converted into a local one.\n\t * @param id The ID to be converted.\n\t */\n\t_getLocalID( id:string ):string;\n}\n\n/**\n * Interface with the base methods of a model that stores and manages an specific type of resources.\n */\nexport interface $Registry<MODEL extends RegisteredPointer = RegisteredPointer> extends Pointer, $PointerLibrary, $PointerValidator {\n\t/**\n\t * Parent registry of the registry.\n\t */\n\treadonly $registry:Registry<any> | $Registry<any> | undefined;\n\n\t/**\n\t * Decorator object to personalize the pointers of the registry.\n\t */\n\treadonly $__modelDecorator:ModelDecorator<MODEL, BaseRegisteredPointer>;\n\t/**\n\t * Map where the resources of the registry are stored.\n\t */\n\treadonly $__resourcesMap:Map<string, MODEL>;\n\n\n\t/**\n\t * Returns if the provided ID string or pointer can be stored in any of the registry hierarchy.\n\t * @param idOrPointer The id or pointer to be checked.\n\t */\n\t$inScope( idOrPointer:string | Pointer ):boolean;\n\t/**\n\t * Returns if the provided ID string or pointer can be only stored in the current registry.\n\t * @param idOrPointer The id or pointer to be checked.\n\t * @param local Flag to ignore hierarchy and only check in the current registry.\n\t */\n\t$inScope( idOrPointer:string | Pointer, local:true ):boolean;\n\n\n\t/**\n\t * Returns true if a resource identified by the provided ID exists in the registry hierarchy.\n\t * @param id ID to check its existence.\n\t */\n\t$hasPointer( id:string ):boolean;\n\t/**\n\t * Returns true if a resource identified by the provided ID exists in the registry hierarchy.\n\t * @param id ID to check its existence.\n\t * @param local Flag to ignore hierarchy and only check in the current registry.\n\t */\n\t$hasPointer( id:string, local:true ):boolean;\n\n\t/**\n\t * Returns the resource identified by the provided ID from the first existence in the registry hierarchy.\n\t * If non exists, a pointer is created in the first register where the ID in scope of.\n\t *\n\t * A error is thrown when no pointer could be returned or created in any registry.\n\t *\n\t * @param id ID to return its pointer representation.\n\t */\n\t$getPointer( id:string ):RegisteredPointer;\n\t/**\n\t * Returns the resource identified by the provided ID from the current registry.\n\t * If non exists, a resource is created from the current registry model.\n\t *\n\t * A error is thrown when no pointer could be returned or created.\n\t *\n\t * @param id ID to check its existence.\n\t * @param local Flag to ignore hierarchy and only return pointers from the current registry.\n\t */\n\t$getPointer( id:string, local:true ):MODEL;\n\n\t/**\n\t * Returns all the pointers stored the registry hierarchy.\n\t */\n\t$getPointers():RegisteredPointer[];\n\t/**\n\t * Returns all the pointers stored in the current registry.\n\t * @param local Flag to ignore hierarchy and only return pointers from the current registry.\n\t */\n\t$getPointers( local:true ):MODEL[];\n\n\t/**\n\t * Removes the resource identified by the provided string ID or {@link Pointer.$id}, from the first occurrence in the registry hierarchy.\n\t * Returns true if the resource could be removed, false otherwise.\n\t * @param idOrPointer ID or Pointer to be removed.\n\t */\n\t$removePointer( idOrPointer:string | RegisteredPointer ):boolean;\n\t/**\n\t * Removes the resource identified by the provided string ID or {@link Pointer.$id}, from the first occurrence in the registry hierarchy.\n\t * Returns true if the resource could be removed, false otherwise.\n\t * @param idOrPointer ID or Pointer to be removed.\n\t * @param local Flag to ignore hierarchy and only remove from the current registry.\n\t */\n\t$removePointer( idOrPointer:string | RegisteredPointer, local:true ):boolean;\n\n\n\t/**\n\t * Returns the local identifier for the ID provided.\n\t * Throws and error if the ID cannot be converted into a local one.\n\t * @param id The ID to be converted.\n\t */\n\t$_getLocalID( id:string ):string;\n\n\t/**\n\t * Adds the provided object as a resource of the registry.\n\t * @param pointer The base object to be added as a resource of the registry.\n\t */\n\t$_addPointer<T extends object>( pointer:T & Pointer ):T & MODEL;\n}\n\n\ntype AnyRegistry<MODEL extends RegisteredPointer = RegisteredPointer> = $Registry<MODEL> | Registry<MODEL>;\n\nfunction __getResourcesMaps( this:void, registry:AnyRegistry ):Map<string, RegisteredPointer> {\n\treturn \"$id\" in registry ? registry.$__resourcesMap : registry.__resourcesMap;\n}\n\nfunction __getParentResource( this:void, registry:AnyRegistry ):AnyRegistry | undefined {\n\treturn \"$id\" in registry ? registry.$registry : registry.registry;\n}\n\nfunction __getDecorator( this:void, registry:AnyRegistry ):ModelDecorator<RegisteredPointer, BaseRegisteredPointer> {\n\treturn \"$id\" in registry ?\n\t\tregistry.$__modelDecorator : registry.__modelDecorator;\n}\n\nfunction __getLocalID( this:void, registry:AnyRegistry, id:string ):string {\n\treturn \"$id\" in registry ?\n\t\tregistry.$_getLocalID( id ) : registry._getLocalID( id );\n}\n\nfunction __addPointer( this:void, registry:AnyRegistry, pointer:Pointer ):RegisteredPointer {\n\treturn \"$id\" in registry ?\n\t\tregistry.$_addPointer( pointer ) : registry._addPointer( pointer );\n}\n\n\nfunction __inScope( this:AnyRegistry | undefined, idOrPointer:string | Pointer, local?:true ):boolean {\n\tif( ! this ) return false;\n\n\ttry {\n\t\tconst id:string = Pointer.getID( idOrPointer );\n\t\t__getLocalID( this, id );\n\n\t\treturn true;\n\t} catch {\n\t\tif( local === true ) return false;\n\n\t\tconst parentRegistry:AnyRegistry | undefined = __getParentResource( this );\n\t\treturn __inScope.call( parentRegistry, idOrPointer );\n\t}\n}\n\nfunction __hasPointer( this:AnyRegistry | undefined, id:string, local?:true ):boolean {\n\tif( ! this ) return false;\n\n\tif( __inScope.call( this, id, true ) ) {\n\t\tconst localID:string = __getLocalID( this, id );\n\n\t\tconst resourcesMap:Map<string, RegisteredPointer> = __getResourcesMaps( this );\n\t\tif( resourcesMap.has( localID ) ) return true;\n\t}\n\n\tif( local === true ) return false;\n\n\tconst parentRegistry:AnyRegistry | undefined = __getParentResource( this );\n\treturn __hasPointer.call( parentRegistry, id );\n}\n\nfunction __getPointer( this:AnyRegistry, id:string, local?:true ):RegisteredPointer {\n\tconst parentRegistry:AnyRegistry | undefined = __getParentResource( this );\n\n\tif( ! __inScope.call( this, id, true ) ) {\n\t\tif( local === true || ! parentRegistry ) throw new IllegalArgumentError( `\"${id}\" is out of scope.` );\n\t\treturn __getPointer.call( parentRegistry, id );\n\t}\n\n\tconst localID:string = __getLocalID( this, id );\n\n\tconst resourcesMap:Map<string, RegisteredPointer> = __getResourcesMaps( this );\n\tif( resourcesMap.has( localID ) ) return resourcesMap.get( localID )!;\n\n\tif( local !== true && __hasPointer.call( parentRegistry, id ) )\n\t\treturn __getPointer.call( parentRegistry!, id );\n\n\treturn __addPointer( this, { $id: id } );\n}\n\nfunction __getPointers( this:AnyRegistry, local?:true ):RegisteredPointer[] {\n\tconst resourcesMap:Map<string, RegisteredPointer> = __getResourcesMaps( this );\n\n\tconst pointers:RegisteredPointer[] = Array.from( resourcesMap.values() );\n\n\tconst parentRegistry:AnyRegistry | undefined = __getParentResource( this );\n\tif( local === true || ! parentRegistry ) return pointers;\n\n\treturn [\n\t\t...__getPointers.call( parentRegistry ),\n\t\t...pointers,\n\t];\n}\n\nfunction __removePointer( this:AnyRegistry | undefined, idOrPointer:string | RegisteredPointer, local?:true ):boolean {\n\tif( ! this ) return false;\n\n\tconst id:string = Pointer.getID( idOrPointer );\n\tif( __inScope.call( this, id, true ) ) {\n\t\tconst localID:string = __getLocalID( this, id );\n\n\t\tconst resourcesMap:Map<string, RegisteredPointer> = __getResourcesMaps( this );\n\t\tif( resourcesMap.delete( localID ) ) return true;\n\t}\n\n\tif( local === true ) return false;\n\n\tconst parentRegistry:AnyRegistry | undefined = __getParentResource( this );\n\treturn __removePointer.call( parentRegistry, idOrPointer );\n}\n\n\n/**\n * Factory, decorator and utils for {@link Registry} and {@link $Registry}.\n */\nexport type RegistryFactory =\n\t& ModelPrototype<Registry<any>>\n\t& BiModelDecorator<Registry<any>, $Registry<any>, BaseRegistry, $BaseRegistry>\n\t;\n\n/**\n * Constant that implements for {@link RegistryFactory}.\n */\nexport const Registry:RegistryFactory = {\n\tPROTOTYPE: {\n\t\tregistry: void 0,\n\n\t\tget __modelDecorator():ModelDecorator<RegisteredPointer> {\n\t\t\tthrow new IllegalArgumentError( `Property \"__modelDecorator\" is required` );\n\t\t},\n\n\t\tget __resourcesMap():Map<string, RegisteredPointer> { return new Map(); },\n\n\n\t\tinScope: __inScope,\n\n\n\t\thasPointer: __hasPointer,\n\n\t\tgetPointer: __getPointer,\n\n\t\tgetPointers: __getPointers,\n\n\t\tremovePointer: __removePointer,\n\n\n\t\t_addPointer<T extends object>( this:AnyRegistry, pointer:T & Pointer ):T & RegisteredPointer {\n\t\t\tif( ! pointer.$id ) throw new IllegalArgumentError( \"The pointer $id cannot be empty.\" );\n\n\t\t\tconst localID:string = __getLocalID( this, pointer.$id );\n\n\t\t\tconst resourcesMap:Map<string, RegisteredPointer> = __getResourcesMaps( this );\n\t\t\tif( resourcesMap.has( localID ) ) throw new IDAlreadyInUseError( `\"${pointer.$id}\" is already being used.` );\n\n\t\t\tconst resource:T & RegisteredPointer = __getDecorator( this )\n\t\t\t\t.decorate( Object.assign<T, BaseRegisteredPointer>( pointer, {\n\t\t\t\t\t$registry: this,\n\t\t\t\t} ) );\n\n\t\t\tresourcesMap.set( localID, resource );\n\n\t\t\treturn resource;\n\t\t},\n\n\t\t_getLocalID( this:AnyRegistry, id:string ):string {\n\t\t\treturn id;\n\t\t},\n\t},\n\n\n\tisDecorated<T extends object>( object:object ):object is any {\n\t\treturn BiModelDecorator\n\t\t\t.hasPropertiesFrom( Registry.PROTOTYPE, object );\n\t},\n\n\tdecorate<T extends object>( object:T ):T & any {\n\t\tif( Registry.isDecorated( object ) ) return object;\n\n\t\treturn BiModelDecorator\n\t\t\t.definePropertiesFrom( Registry.PROTOTYPE, object );\n\t},\n};\n"],"sourceRoot":"../../src"}