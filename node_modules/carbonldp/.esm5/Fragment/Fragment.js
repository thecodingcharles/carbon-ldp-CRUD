import { ModelDecorator } from "../Model/ModelDecorator";
import { QueryablePointer } from "../QueryDocuments/QueryablePointer";
import { TransientFragment } from "./TransientFragment";
export var Fragment = {
    PROTOTYPE: {
        get $repository() {
            return this.$registry;
        },
        set $repository(document) {
            this.$registry = document;
        },
        get $_resolved() {
            return this.$document.$_resolved;
        },
        set $_resolved(_value) { },
    },
    isDecorated: function (object) {
        return ModelDecorator
            .hasPropertiesFrom(Fragment.PROTOTYPE, object);
    },
    decorate: function (object) {
        if (Fragment.isDecorated(object))
            return object;
        var forced = Object.assign(object, {
            $document: object.$registry,
            $repository: object.$registry,
        });
        var target = ModelDecorator
            .decorateMultiple(forced, TransientFragment, QueryablePointer);
        return ModelDecorator
            .definePropertiesFrom(Fragment.PROTOTYPE, target);
    },
    create: TransientFragment.create,
    createFrom: TransientFragment.createFrom,
};

//# sourceMappingURL=Fragment.js.map
