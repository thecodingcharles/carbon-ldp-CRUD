{"version":3,"sources":["RDF/Document.ts"],"names":[],"mappings":"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","file":"Document.js","sourcesContent":["import * as Utils from \"./../Utils\";\n\nimport { RDFNode } from \"./Node\";\nimport { URI } from \"./URI\";\n\n\n/**\n * Interface that represents an RDF Document.\n */\nexport type RDFDocument = {\n\t/**\n\t * The ID URI of the current document.\n\t */\n\t\"@id\":string;\n\t/**\n\t * The graph content of the current document.\n\t */\n\t\"@graph\":RDFNode[];\n};\n\n\n/**\n * Factory and utils for {@link RDFDocument}.\n */\nexport interface RDFDocumentFactory {\n\tis( value:any ):value is RDFDocument;\n\n\tcreate( resources:RDFNode[], uri?:string ):RDFDocument;\n\n\n\tgetDocuments( objects:object | object[] ):RDFDocument[];\n\n\tgetFreeNodes( objects:object | object[] ):RDFNode[];\n\n\tgetResources( objects:object | object[] ):RDFNode[];\n\n\n\tgetDocumentResources( document:RDFNode[] | RDFDocument ):RDFNode[];\n\n\tgetNamedFragmentResources( document:RDFNode[] | RDFDocument, documentResource?:string | RDFNode ):RDFNode[];\n\n\tgetBNodeResources( document:RDFDocument ):RDFNode[];\n\n\tgetNodes( rdfDocument:RDFDocument ):[ RDFNode[], RDFNode[] ];\n}\n\n/**\n * Constant that implements {@link RDFDocumentFactory}.\n */\nexport const RDFDocument:RDFDocumentFactory = {\n\tis( value:any ):value is RDFDocument {\n\t\treturn Utils.hasProperty( value, \"@graph\" )\n\t\t\t&& Utils.isArray( value[ \"@graph\" ] );\n\t},\n\n\tcreate( resources:RDFNode[], uri?:string ):RDFDocument {\n\t\treturn {\n\t\t\t\"@id\": uri ? uri : \"\",\n\t\t\t\"@graph\": resources,\n\t\t};\n\t},\n\n\n\tgetDocuments( objects:object | object[] ):RDFDocument[] {\n\t\tif( Utils.isArray( objects ) ) return objects\n\t\t\t.filter( RDFDocument.is );\n\n\t\tif( RDFDocument.is( objects ) ) return [ objects ];\n\n\t\treturn [];\n\t},\n\n\tgetFreeNodes( objects:object | object[] ):RDFNode[] {\n\t\tif( ! Array.isArray( objects ) ) return [];\n\n\t\treturn objects\n\t\t\t.filter( element => ! RDFDocument.is( element ) )\n\t\t\t.filter( RDFNode.is );\n\t},\n\n\tgetResources( objects:object | object[] ):RDFNode[] {\n\t\tconst resources:RDFNode[] = RDFDocument.getFreeNodes( objects );\n\n\t\tRDFDocument\n\t\t\t.getDocuments( objects )\n\t\t\t.map( document => document[ \"@graph\" ] )\n\t\t\t.forEach( nodes => resources.push( ...nodes ) )\n\t\t;\n\n\t\treturn resources;\n\t},\n\n\n\tgetDocumentResources( document:RDFDocument | RDFNode[] ):RDFNode[] {\n\t\treturn RDFDocument\n\t\t\t.getResources( document )\n\t\t\t.filter( node => ! RDFNode.isFragment( node ) )\n\t\t\t;\n\t},\n\n\tgetNamedFragmentResources( document:RDFDocument | RDFNode[], documentResource?:string | RDFNode ):RDFNode[] {\n\t\tconst uriToMatch:string | undefined = Utils.isObject( documentResource ) ?\n\t\t\tRDFNode.getID( documentResource ) :\n\t\t\tdocumentResource;\n\n\t\treturn RDFDocument\n\t\t\t.getResources( document )\n\t\t\t.filter( node => {\n\t\t\t\tconst id:string = RDFNode.getID( node );\n\n\t\t\t\tif( ! URI.hasFragment( id ) ) return;\n\n\t\t\t\tif( ! uriToMatch ) return true;\n\t\t\t\treturn URI.getDocumentURI( id ) === uriToMatch;\n\t\t\t} )\n\t\t\t;\n\t},\n\n\tgetBNodeResources( document:RDFDocument | RDFNode[] ):RDFNode[] {\n\t\treturn RDFDocument\n\t\t\t.getResources( document )\n\t\t\t.filter( node => {\n\t\t\t\tconst id:string = RDFNode.getID( node );\n\t\t\t\treturn URI.isBNodeID( id );\n\t\t\t} )\n\t\t\t;\n\t},\n\n\tgetNodes( rdfDocument:RDFDocument ):[ RDFNode[], RDFNode[] ] {\n\t\tconst documentNodes:RDFNode[] = [];\n\t\tconst fragmentNodes:RDFNode[] = [];\n\n\t\tfor( const node of rdfDocument[ \"@graph\" ] ) {\n\t\t\t(RDFNode.isFragment( node ) ? fragmentNodes : documentNodes).push( node );\n\t\t}\n\n\t\treturn [ documentNodes, fragmentNodes ];\n\t},\n\n};\n"],"sourceRoot":"../../src"}