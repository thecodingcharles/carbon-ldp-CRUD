import { IllegalArgumentError } from "../Errors/IllegalArgumentError";
import { URI } from "../RDF/URI";
export function _validateEventType(event) {
    if (!/(access-point|child|\*)\.(created|\*)|(document|\*)\.(modified|deleted|\*)|(member|\*)\.(added|removed|\*)/.test(event))
        throw new IllegalArgumentError("Provided event type \"" + event + "\" is invalid.");
}
export function _parseURIPattern(uriPattern, baseURI) {
    if (!URI.isBaseOf(baseURI, uriPattern))
        throw new IllegalArgumentError("\"" + uriPattern + "\" is out of scope.");
    if (uriPattern === "/")
        return "";
    uriPattern = URI.getRelativeURI(uriPattern, baseURI);
    uriPattern = uriPattern.substring(+uriPattern.startsWith("/"), uriPattern.length - +uriPattern.endsWith("/"));
    return uriPattern
        .split("/")
        .map(function (slug) {
        if (slug === "**")
            return "#";
        return encodeURIComponent(slug)
            .replace(/\./g, "^");
    }).join(".");
}
export function _createDestination(event, uriPattern, baseURI) {
    _validateEventType(event);
    uriPattern = _parseURIPattern(uriPattern, baseURI);
    return "/topic/" + event + (uriPattern ? "." + uriPattern : uriPattern);
}

//# sourceMappingURL=Utils.js.map
